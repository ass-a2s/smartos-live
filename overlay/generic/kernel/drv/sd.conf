#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License (the "License").
# You may not use this file except in compliance with the License.
#
# You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
# or http://www.opensolaris.org/os/licensing.
# See the License for the specific language governing permissions
# and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets "[]" replaced with your own identifying
# information: Portions Copyright [yyyy] [name of copyright owner]
#
# CDDL HEADER END
#

#
# Copyright (c) 1991, 2010, Oracle and/or its affiliates. All rights reserved.
#

name="sd" class="scsi" target=0 lun=0;
name="sd" class="scsi" target=1 lun=0;
name="sd" class="scsi" target=2 lun=0;
name="sd" class="scsi" target=3 lun=0;
name="sd" class="scsi" target=4 lun=0;
name="sd" class="scsi" target=5 lun=0;
name="sd" class="scsi" target=6 lun=0;
name="sd" class="scsi" target=7 lun=0;
name="sd" class="scsi" target=8 lun=0;
name="sd" class="scsi" target=9 lun=0;
name="sd" class="scsi" target=10 lun=0;
name="sd" class="scsi" target=11 lun=0;
name="sd" class="scsi" target=12 lun=0;
name="sd" class="scsi" target=13 lun=0;
name="sd" class="scsi" target=14 lun=0;
name="sd" class="scsi" target=15 lun=0;

#
# The following stub node is needed for pathological bottom-up
# devid resolution on a self-identifying transport.
#
name="sd" class="scsi-self-identifying";

#
# Associate the driver with devid resolution.
#
ddi-devid-registrant=1;

#
# Certain hardware RAID controllers have nonvolatile caches but do not
# support the SYNC_NV bit to restrict flushes to the volatile portion of
# the cache, if any.  In order to get acceptable performance out of these
# devices, we need to suppress cache flushing on them.  In most (hopefully
# all) cases, if the battery fails or the cache otherwise becomes volatile,
# the controller will switch to write-through mode, and ensure that any
# underlying drive cache is off.  In this case, it should still be safe to
# dispense with cache flush commands.  Controllers for which this is not the
# case should have cache-nonvolatile set unless data loss and corruption are
# acceptable.
#
# In addition, *all* devices have their retries capped at 1.  There are an
# additional 2 retries for "victim" IOs if a reset is needed.  Retrying is
# very rarely successful, and it is preferable to let ZFS do it where needed.
#
# For the Samsung client drives, users have seen data corruption when they use
# the advertised 512 byte sectors. The actual sector size of the flash
# translation layer is 4K, so it's relatively safe to make this change which
# annecdotally solves that problem.
#
sd-config-list=
        "", "retries-timeout:1,retries-busy:1,retries-reset:1,retries-victim:2",
        "DELL    PERC H710", "cache-nonvolatile:true",
        "DELL    PERC H700", "cache-nonvolatile:true",
        "DELL    PERC/6i", "cache-nonvolatile:true",
        "ATA     Samsung SSD 830", "physical-block-size:4096",
        "ATA     Samsung SSD 840", "physical-block-size:4096",
        "ATA     Samsung SSD 850", "physical-block-size:4096",
        "ATA     Samsung SSD 860", "physical-block-size:4096";

    "ATA     C400-MTFDDAC064M", "physical-block-size:8192",
    "ATA     C400-MTFDDAC128M", "physical-block-size:8192",
    "ATA     C400-MTFDDAC256M", "physical-block-size:8192",
    "ATA     C400-MTFDDAC512M", "physical-block-size:8192",
    "ATA     M4-CT064M4SSD2  ", "physical-block-size:8192",
    "ATA     M4-CT128M4SSD2  ", "physical-block-size:8192",
    "ATA     M4-CT256M4SSD2  ", "physical-block-size:8192",
    "ATA     M4-CT512M4SSD2  ", "physical-block-size:8192",
    "ATA     Corsair Force 3 ", "physical-block-size:8192",
    "ATA     Corsair Force GS", "physical-block-size:8192",
    "ATA     Corsair Force LS", "physical-block-size:8192",
    "ATA     KINGSTON SH100S3", "physical-block-size:8192",
    "ATA     KINGSTON SH103S3", "physical-block-size:8192",
    "ATA     INTEL SSDSA2CT04", "physical-block-size:8192",
    "ATA     INTEL SSDSA2CW04", "physical-block-size:8192",
    "ATA     INTEL SSDSA2CW08", "physical-block-size:8192",
    "ATA     INTEL SSDSA2CW12", "physical-block-size:8192",
    "ATA     INTEL SSDSA2CW16", "physical-block-size:8192",
    "ATA     INTEL SSDSA2CW30", "physical-block-size:8192",
    "ATA     INTEL SSDSA2CW60", "physical-block-size:8192",
    "ATA     INTEL SSDSC2BA10", "physical-block-size:8192",
    "ATA     INTEL SSDSC2BA20", "physical-block-size:8192",
    "ATA     INTEL SSDSC2BA40", "physical-block-size:8192",
    "ATA     INTEL SSDSC2BA80", "physical-block-size:8192",
    "ATA     INTEL SSDSC2BW12", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CT06", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CT12", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CT18", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CT24", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CW06", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CW12", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CW18", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CW24", "physical-block-size:8192",
    "ATA     INTEL SSDSC2CW48", "physical-block-size:8192",
    "ATA     OCZ-AGILITY2    ", "physical-block-size:8192",
    "ATA     OCZ-VERTEX2 3.5 ", "physical-block-size:8192",
    "ATA     OCZ-VERTEX3     ", "physical-block-size:8192",
    "ATA     OCZ-VERTEX3 LT  ", "physical-block-size:8192",
    "ATA     OCZ-VERTEX3 MI  ", "physical-block-size:8192",
    "ATA     OCZ-VERTEX4     ", "physical-block-size:8192",
    "ATA     SAMSUNG MZ7WD120", "physical-block-size:8192",
    "ATA     SAMSUNG MZ7WD240", "physical-block-size:8192",
    "ATA     SAMSUNG MZ7WD480", "physical-block-size:8192",
    "ATA     SAMSUNG MZ7WD960", "physical-block-size:8192",
    "ATA     SanDisk SDSSDHP0", "physical-block-size:8192",
    "ATA     TOSHIBA THNSNH06", "physical-block-size:8192",
    "ATA     TOSHIBA THNSNH12", "physical-block-size:8192",
    "ATA     TOSHIBA THNSNH25", "physical-block-size:8192",
    "ATA     TOSHIBA THNSNH51", "physical-block-size:8192",

    "ATA     INTEL SSDSA2M040", "physical-block-size:4096",
    "ATA     INTEL SSDSA2M080", "physical-block-size:4096",
    "ATA     INTEL SSDSA2M160", "physical-block-size:4096",
    "ATA     OCZ CORE_SSD    ", "physical-block-size:4096",
    "ATA     SAMSUNG MCCOE32G", "physical-block-size:4096",
    "ATA     SAMSUNG MCCOE64G", "physical-block-size:4096",
    "ATA     MARVELL SD88SA02", "physical-block-size:4096",
    "ATA     Hitachi HDS5C303", "physical-block-size:4096",
    "ATA     SAMSUNG HD204UI ", "physical-block-size:4096",
    "ATA     ST2000DL003 9VT1", "physical-block-size:4096",
    "ATA     ST2000DL004 HD20", "physical-block-size:4096",
    "ATA     ST3250820NS     ", "physical-block-size:4096",
    "ATA     WDC WD10EARS-00M", "physical-block-size:4096",
    "ATA     WDC WD10EARS-00S", "physical-block-size:4096",
    "ATA     WDC WD10EARS-00Z", "physical-block-size:4096",
    "ATA     WDC WD15EARS-00M", "physical-block-size:4096",
    "ATA     WDC WD15EARS-00S", "physical-block-size:4096",
    "ATA     WDC WD15EARS-00Z", "physical-block-size:4096",
    "ATA     WDC WD20EARS-00M", "physical-block-size:4096",
    "ATA     WDC WD20EARS-00S", "physical-block-size:4096",
    "ATA     WDC WD20EARS-00Z", "physical-block-size:4096",
    "WDC     WD30EFRX-68EUZN0", "physical-block-size:4096",
    "ATA     WDC WD30EFRX-68E", "physical-block-size:4096",

    "ATA     QEMU HARDDISK   ", "physical-block-size:4096",
    "IET     VIRTUAL-DISK    ", "physical-block-size:4096",
    "NETAPP  LUN             ", "physical-block-size:4096";

